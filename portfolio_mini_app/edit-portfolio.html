<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, shrink-to-fit=no">
    <title>Редактирование портфеля</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/edit-portfolio.css">
</head>
<body>

    <div class="container">
        <div class="edit-header">
            <h1 class="page-title">Настройка портфеля</h1>
            <p class="page-subtitle">Отрегулируйте риск и замените активы, чтобы создать идеальный портфель для себя.</p>
        </div>

        <!-- Карточка портфеля (сворачиваемая) -->
        <details class="portfolio-card-toggle" id="portfolio-details" open>
            <summary class="portfolio-card-header">
                <div class="summary-main">
                    <h3 id="portfolio-strategy-title">Умеренный портфель</h3>
                    <span class="summary-details"><span id="portfolio-amount"></span> ₽ • <span id="portfolio-term"></span> лет</span>
                </div>
                <span class="toggle-icon">▼</span>
            </summary>
            <div class="portfolio-card-content">
                <h4>Активы в портфеле</h4>
                <div class="assets-list" id="assets-list">
                    <!-- Активы будут добавлены через JS -->
                </div>
            </div>
        </details>

        <!-- Слайдер риска -->
        <div class="risk-slider-container" id="risk-slider-section">
            <div class="slider-header">
                <label for="risk-slider">Уровень риска</label>
                <span id="risk-level-label">Умеренный</span>
            </div>
            <input type="range" id="risk-slider" min="0" max="100" value="50">
            <div class="slider-labels">
                <span>Мин. риск</span>
                <span>Выс. риск</span>
            </div>
        </div>

        <!-- График -->
        <div class="chart-container">
            <div class="chart-wrapper">
                <canvas id="performance-chart"></canvas>
            </div>
        </div>
        
        <!-- Кнопки управления -->
        <div class="action-buttons">
            <button class="btn btn-secondary" id="reset-btn">Сбросить</button>
            <button class="btn btn-main" id="save-btn">Сохранить и вернуться</button>
        </div>
    </div>

    <!-- Обучающий Pop-up -->
    <div id="tutorial-popup" class="popup-overlay">
        <div class="popup-content">
            <button class="popup-close" id="popup-close">&times;</button>
            <h3>Добро пожаловать в редактор!</h3>
            <p>Здесь вы можете тонко настроить ваш портфель.</p>
            <ul class="tutorial-list">
                <li>Используйте <strong>слайдер риска</strong>, чтобы изменить потенциальную доходность и риск портфеля.</li>
                <li>Внутри карточки портфеля вы можете <strong>заменить один актив на другой</strong> из той же категории.</li>
            </ul>
            <button class="btn btn-main" id="start-tutorial-btn">Понятно</button>
        </div>
    </div>

    <!-- Модальное окно для замены активов -->
    <div id="replace-asset-popup" class="popup-overlay">
        <div class="popup-content">
            <button class="popup-close" id="close-replace-popup">&times;</button>
            <h3 id="replace-popup-title">Заменить актив</h3>
            <div id="replacement-options" class="replacement-options-list">
                <!-- Опции для замены будут добавлены через JS -->
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="js/script.js" type="module"></script>
    <script src="js/edit-portfolio.js" type="module"></script>

</body>
</html>
